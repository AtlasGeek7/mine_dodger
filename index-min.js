const DODGER=document.getElementById("dodger"),GAME=document.getElementById("game"),SCORE=document.getElementById("score"),BTN=document.getElementById("btn"),STATUS=document.getElementById("status"),GAME_HEIGHT=400,GAME_WIDTH=400,LEFT_ARROW=37,RIGHT_ARROW=39;var ROCKS=[],gameOver=!1;let dodgerWidth=DODGER.offsetWidth;const START=document.getElementById("start"),DISP=document.getElementById("disp");var gameInterval=null,movT=null;function checkCollision(e){if(positionToInteger(e.style.top)>360){const t=positionToInteger(DODGER.style.left),n=positionToInteger(DODGER.style.left)+37,o=positionToInteger(e.style.left),r=positionToInteger(e.style.left)+40;if(o<t&&r>t||o>t&&r<n||o<n&&r>n)return!0}}let rand=0,cnt=0;function createRock(e){const t=document.createElement("div");t.className="rock",t.style.left=`${e}px`,rand=Math.floor(10*Math.random()),t.innerHTML=rand,cnt++;return t.style.top="-20px",game.appendChild(t),ROCKS.push(t),t}DISP.innerHTML=movT;let len=0,point=0,rockY=0,topNumbers="";function moveRock(){len=ROCKS.length;for(let e=0;e<len-1;e++)if(topNumbers=ROCKS[e].style.top.replace("px",""),(rockY=parseInt(topNumbers,10))>380)gameOver||(point+=parseInt(ROCKS[e].innerHTML),SCORE.innerHTML=point),ROCKS[e].remove(),ROCKS.splice(e,1);else if(checkCollision(ROCKS[e])){document.getElementById("bang").play(),ROCKS[e].style.backgroundImage="url('boom.gif')",setTimeout(function(){explode()},1e3)}else ROCKS[e].style.top=`${rockY+5}px`}function explode(){endGame()}function endGame(){document.getElementById("zik").pause(),gameOver=!0,STATUS.style.visibility="visible",clearInterval(gameInterval),clearInterval(movT);for(let e=0;e<ROCKS.length;e++)ROCKS[e].remove();ROCKS=[],DODGER.style.backgroundImage="url('gravestone.png')",window.removeEventListener("keydown",moveDodger)}function moveDodger(e){gameOver||(e.which===RIGHT_ARROW&&moveDodgerRight(),e.which===LEFT_ARROW&&moveDodgerLeft())}function moveDodgerLeft(){var e=dodger.style.left.replace("px",""),t=parseInt(e,10);t>0&&(dodger.style.left=`${t-4}px`)}function moveDodgerRight(){var e=dodger.style.left.replace("px",""),t=parseInt(e,10);t<GAME_WIDTH-dodgerWidth&&(dodger.style.left=`${t+4}px`)}function positionToInteger(e){return parseInt(e.split("px")[0])||0}function start(){window.addEventListener("keydown",moveDodger),document.getElementById("zik").play(),START.style.visibility="hidden",gameInterval=setInterval(function(){createRock(Math.floor(Math.random()*(GAME_WIDTH-40)))},1e3),movT=setInterval(moveRock,100)}BTN.addEventListener("click",function(){var e=document.getElementById("zik");e.pause(),e.currentTime=0,STATUS.style.visibility="hidden";for(let e=0;e<ROCKS.length;e++)ROCKS[e].remove();point=0,ROCKS=[],gameOver=!1,clearInterval(gameInterval),SCORE.innerHTML=0,DODGER.style.backgroundImage="url('crab.gif')",START.style.visibility="visible",clearInterval(movT),DISP.innerHTML=""});
