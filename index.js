const DODGER=document.getElementById('dodger');const GAME=document.getElementById('game');const SCORE=document.getElementById('score');const BTN=document.getElementById("btn");const STATUS=document.getElementById("status");const GAME_HEIGHT=400;const GAME_WIDTH=400;const LEFT_ARROW=37;const RIGHT_ARROW=39;var ROCKS=[];var gameOver=false;let dodgerWidth=DODGER.offsetWidth;const START=document.getElementById('start');const DISP=document.getElementById('disp');var gameInterval=null;var movT=null;function checkCollision(rock){const top=positionToInteger(rock.style.top);if(top>360){const dodgerLeftEdge=positionToInteger(DODGER.style.left);const dodgerRightEdge=positionToInteger(DODGER.style.left)+37;const rockLeftEdge=positionToInteger(rock.style.left);const rockRightEdge=positionToInteger(rock.style.left)+40;if(rockLeftEdge<dodgerLeftEdge&&rockRightEdge>dodgerLeftEdge||rockLeftEdge>dodgerLeftEdge&&rockRightEdge<dodgerRightEdge||rockLeftEdge<dodgerRightEdge&&rockRightEdge>dodgerRightEdge){return true}}}let rand=0;let cnt=0;function createRock(x){const rock=document.createElement('div');rock.className='rock';rock.style.left=`${ x }px`;rock.style.zIndex="1";rand=Math.floor(Math.random()*10);rock.innerHTML=rand;cnt++;var top=-20;rock.style.top=`${ top }px`;game.appendChild(rock);ROCKS.push(rock);return rock}DISP.innerHTML=movT;let len=0;let point=0;let rockY=0;let topNumbers='';function moveRock(){len=ROCKS.length;for(let i=0;i<len-1;i+=1){topNumbers=ROCKS[i].style.top.replace('px','');rockY=parseInt(topNumbers,10);if(rockY>380){if(!gameOver){point+=parseInt(ROCKS[i].innerHTML);SCORE.innerHTML=point;}ROCKS[i].remove();ROCKS.splice(i,1);}else if(checkCollision(ROCKS[i])){var y=document.getElementById("bang");y.play();ROCKS[i].style.backgroundImage="url('boom.gif')";var boomT;boomT=setTimeout(function(){explode()},1000);}else{ROCKS[i].style.top=`${rockY+5}px`;}}}function explode(){endGame()}function endGame(){var x=document.getElementById("zik");x.pause();gameOver=true;STATUS.style.visibility="visible";BTN.style.visibility="visible";clearInterval(gameInterval);clearInterval(movT);for(let i=0;i<ROCKS.length;i+=1){ROCKS[i].remove()}ROCKS=[];DODGER.style.backgroundImage="url('gravestone.png')";window.removeEventListener('keydown',moveDodger);}function moveDodger(e){if(!gameOver){if(e.which===RIGHT_ARROW){moveDodgerRight()}if(e.which===LEFT_ARROW){moveDodgerLeft()}}}function moveDodgerLeft(){if(!gameOver){var leftNumbers=dodger.style.left.replace('px','');var left=parseInt(leftNumbers,10);if(left>0){dodger.style.left=`${left-4}px`}}}function moveDodgerRight(){if(!gameOver){var leftNumbers=dodger.style.left.replace('px','');var left=parseInt(leftNumbers,10);if(left<GAME_WIDTH-dodgerWidth){dodger.style.left=`${left+4}px`}}}function positionToInteger(p){return parseInt(p.split('px')[0])||0}BTN.addEventListener("click",function(){var x=document.getElementById("zik");x.pause();x.currentTime=0;STATUS.style.visibility="hidden";for(let i=0;i<ROCKS.length;i+=1){ROCKS[i].remove()}point=0;ROCKS=[];gameOver=false;clearInterval(gameInterval);SCORE.innerHTML=0;DODGER.style.backgroundImage="url('crab.gif')";START.style.visibility="visible";clearInterval(movT);DISP.innerHTML='';});function start(){window.addEventListener('keydown',moveDodger);var x=document.getElementById("zik");x.play();START.style.visibility="hidden";BTN.style.visibility="hidden";gameInterval=setInterval(function(){createRock(Math.floor(Math.random()*(GAME_WIDTH-40)))},1000);movT=setInterval(moveRock,100);}
